# GPX Viewer

<br>

シンプルな GPX ビューアです。

GPXファイルに `time` 要素がある場合は時間スライダで現在位置を再生できます。

<br><br>

## ライブデモ（GitHub Pages）

- https://takamitsu-iida.github.io/gpx-viewer/

<br><br>

## できること

- GPX（`trkpt`/`rtept`）の読み込みと軌跡表示
- 移動速度による軌跡の色付け
- `time` ありの場合：時間スライダで現在位置（マーカー）を移動・再生
- 区間選択（開始〜終了）と、選択区間のハイライト表示
- UI下の情報表示
  - 開始から終了までの距離
  - 開始から終了までの時間
  - 平均移動速度（ノット/時）
  - GPS座標（現在位置）
- 潮汐グラフの表示
- 画像出力（地図領域のみをPNG保存）

<br><br>

## 使い方

### 1) ローカルで起動

ES Modules の読み込みや `fetch()` を安定させるため、簡易サーバで起動するのを推奨します。

```bash
cd gpx-viewer
python3 -m http.server 8000
```

ブラウザで以下を開きます。

- http://localhost:8000/

### 2) GPXを表示

右側サイドバーの UI から操作します。

- **デモ**：同梱サンプル（`data/kaichouzuV_route_14_20260214_205630.gpx`）を読み込みます
- **ファイル選択**：手元の `.gpx` を選択して読み込みます

### 3) 時間スライダ（`time` ありGPXのみ）

- 「区間選択」で開始/終了を動かすと、選択区間が太線でハイライトされます
- 「再生」で現在位置が時間に沿って移動します
- 情報パネルは、選択区間と現在位置に連動して更新されます

### 4) 画像出力（SNS/釣果報告向け）

SNSやブログ等で使いやすいように、画像として保存できます。

右側サイドバーの「出力」→「画像保存」で、地図領域（選択区間＋潮汐を含む）をPNGとして保存します。

<br><br>

## ディレクトリ構成

- `index.html`：エントリ
- `static/site/js/index.js`：メインロジック（GPX解析、UI、時間スライダ、統計表示）
- `static/site/css/style.css`：スタイル（地図/サイドバー分離レイアウト、UI/情報パネル）
- `data/`：デモ用GPX

<br><br>

## 地図表示について

地図表示はLeaflet、OpenStreetMapを利用させていただいてます。

感謝致します。

<br><br>

## 潮汐データについて

[日本沿岸736港の潮汐表](https://tide736.net/) を利用させていただいてます。

感謝致します。

<br>

> [!NOTE]
>
> 現在、潮汐データは神奈川県三浦市で固定です。GPXファイルから県名を取り出すのがちょっと面倒なので。
>

<br>

<!--

Tide API（tide736 API）
「日本沿岸736港の潮汐表」を計算・配信している個人サイトのAPIサービス。

APIのURL
https://api.tide736.net/get_tide.php

pc=県のコード 14で固定(神奈川県)
hc=港コード 16で固定(油壷)
yr=年
mn=月
dy=日
rg=期間 dayで固定

例：2026年2月16日の場合
https://api.tide736.net/get_tide.php?pc=14&hc=16&yr=2026&mn=2&dy=16&rg=day

-->